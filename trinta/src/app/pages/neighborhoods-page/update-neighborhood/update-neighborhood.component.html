<mat-card
class="trinta-card add-user-card mb-25 bg-white border-none d-block"
>
<mat-card-header>
    <mat-card-title>
        <h5 class="mt-0 mb-0">
            Agregar Fraccionamiento
        </h5>
    </mat-card-title>
    <mat-card-subtitle>
      <a class="default-btn" mat-button (click)="onSubmit()">
          <i class="ri-add-line"></i> Guardar
      </a>
  </mat-card-subtitle>
</mat-card-header>
<mat-card-content>
    <form [formGroup]="neighborhoodForm">
        <div class="row">
            <div class="col-lg-4">
                <label class="label d-block fw-medium mb-10">
                    Nombre
                </label>
                <mat-form-field>
                    <i-feather name="home"></i-feather>
                    <mat-label>Nombre</mat-label>
                    <input matInput formControlName="name">
                </mat-form-field>
                <div class="error text-danger" *ngIf="neighborhoodForm.get('name')!.hasError('required') && neighborhoodForm.get('name')!.touched">
                  El nombre es requerido.
                </div>
            </div>
            <div class="col-lg-4">
              <label class="label d-block fw-medium mb-10">
                  Ciudad
              </label>
              <mat-form-field>
                <i-feather name="globe"></i-feather>
                  <mat-label>Ciudad</mat-label>
                  <input matInput formControlName="city">
              </mat-form-field>
              <div class="error text-danger" *ngIf="neighborhoodForm.get('city')!.hasError('required') && neighborhoodForm.get('city')!.touched">
                La ciudad es requerida.
              </div>
          </div>
          <div class="col-lg-4">
            <label class="label d-block fw-medium mb-10">
                Municipio
            </label>
            <mat-form-field>
              <i-feather name="globe"></i-feather>
                <mat-label>Municipio</mat-label>
                <input matInput formControlName="municipal">
            </mat-form-field>
            <div class="error text-danger" *ngIf="neighborhoodForm.get('municipal')!.hasError('required') && neighborhoodForm.get('municipal')!.touched">
              El municipio es requerida.
            </div>
        </div>

            <div class="col-lg-4">
                <label class="label d-block fw-medium mb-10">
                    Latitud
                </label>
                <mat-form-field>
                    <i-feather name="map-pin"></i-feather>
                    <mat-label>Latitud</mat-label>
                    <input matInput formControlName="latitude">
                </mat-form-field>
                <div class="error text-danger" *ngIf="neighborhoodForm.get('latitude')!.hasError('required') && neighborhoodForm.get('latitude')!.touched">
                  La latitud es requerida.
                </div>
            </div>
            <div class="col-lg-4">
              <label class="label d-block fw-medium mb-10">
                  Longitud
              </label>
              <mat-form-field>
                  <i-feather name="map-pin"></i-feather>
                  <mat-label>Longitud</mat-label>
                  <input matInput formControlName="longitude">
              </mat-form-field>
              <div class="error text-danger" *ngIf="neighborhoodForm.get('longitude')!.hasError('required') && neighborhoodForm.get('longitude')!.touched">
                La Longitud es requerida.
              </div>
          </div>


            <div class="col-lg-4">
                <label class="label d-block fw-medium mb-10">
                    Estado
                </label>
                <mat-form-field>
                  <i-feather name="list"></i-feather>
                    <mat-label>Selecciona</mat-label>
                    <mat-select formControlName="state">
                      <mat-option [value]="true">Activo</mat-option>
                      <mat-option [value]="false">Inactivo</mat-option>
                    </mat-select>
                </mat-form-field>
                <div class="error text-danger" *ngIf="neighborhoodForm.get('state')!.hasError('required') && neighborhoodForm.get('state')!.touched">
                  El estado es requerido.
                </div>
            </div>

        </div>
    </form>
</mat-card-content>
</mat-card>

<div class="row">
<div class="col-lg-6">

  <mat-card
  class="trinta-card add-user-card mb-25 bg-white border-none d-block"
>
  <mat-card-header>
      <mat-card-title>
          <h5 class="mt-0 mb-0">
              Subdivisión
          </h5>
      </mat-card-title>
      <mat-card-subtitle>
        <a class="default-btn" mat-button (click)="addSubdivision()">
            <i class="ri-add-line"></i> Add Subdivisión
        </a>
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
        <div class="row">
          <div class="col-lg-12">
            <label class="label d-block fw-medium mb-10">
                Nombre
            </label>
            <mat-form-field>
                <i-feather name="home"></i-feather>
                <mat-label>Nombre</mat-label>
                <input matInput [(ngModel)]="subdivisionName" name="subdivisionName">
            </mat-form-field>
        </div>
        </div>
        <div class="row">
          <form [formGroup]="neighborhoodForm">
            <!-- <mat-selection-list #subdivisionsList [formControl]="subDivisionControl" name="subdivision" [multiple]="false">
              @for (subdivision of subdivisions.controls; track subdivision) {
                <mat-list-option color="primary" [value]="subdivision.value.name">
                  {{ subdivision.value.name }}
                </mat-list-option>
                <button mat-icon-button (click)="removeSubdivision(i)">
                  <mat-icon>delete</mat-icon>
                </button>
              }
            </mat-selection-list>
          
            <p>
              Subdivision selected: {{subdivisionsList.selectedOptions.hasValue() ? subdivisionsList.selectedOptions.selected[0].value : 'None'}}
            </p> -->
            
            <mat-selection-list #subdivisionsList [formControl]="subDivisionControl" [multiple]="false">
                <ng-container *ngFor="let subdivision of subdivisions.controls; let i = index; trackBy: trackByFn">
                  <mat-list-option *ngIf="!subdivision.value.delete"
                                   color="primary" 
                                   [value]="subdivision.value.name">
                    {{ subdivision.value.name }}
                    <button mat-icon-button color="warn" (click)="removeSubdivision(i)">
                      <i class="ri-close-circle-line"></i>
                    </button>
                  </mat-list-option>
                </ng-container>
              </mat-selection-list>
              

          </form>
        </div>
        
        
  </mat-card-content>
</mat-card>

</div>
<div class="col-lg-6">
<mat-card class="trinta-card add-user-card mb-25 bg-white border-none d-block">
  <mat-card-header>
    <mat-card-title>
      <h5 class="mt-0 mb-0">Calles</h5>
    </mat-card-title>
    <mat-card-subtitle>
      <a class="default-btn" mat-button (click)="addStreet()">
          <i class="ri-add-line"></i> Add Calle
      </a>
    </mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <div class="row">
      <div class="col-lg-12">
        <label class="label d-block fw-medium mb-10">
            Nombre
        </label>
        <mat-form-field>
            <i-feather name="map"></i-feather>
            <mat-label>Nombre</mat-label>
            <input matInput [(ngModel)]="streetName" name="streetName">
        </mat-form-field>
    </div>
    </div>
    <div class="row">
      <!-- <mat-selection-list>
        @for (street of selectedSubdivisionStreets.controls; track street) {
          <mat-list-option>{{ street.value.name }}</mat-list-option>
          <button mat-icon-button (click)="removeStreet(j)">
            <mat-icon>delete</mat-icon>
          </button>
        }
      </mat-selection-list> -->
      <mat-selection-list>
        <ng-container *ngFor="let street of selectedSubdivisionStreets.controls; let j = index">
          <mat-list-option *ngIf="!street.value.delete">
            {{ street.value.name }}
            <button mat-icon-button color="warn" (click)="removeStreet(j)">
              <i class="ri-close-circle-line"></i>
            </button>
          </mat-list-option>
        </ng-container>
      </mat-selection-list>
      
    </div>

  </mat-card-content>
</mat-card>
</div>
</div> 

<!-- <div class="row">
  <div class="col-lg-6">
    <mat-card class="trinta-card add-user-card mb-25 bg-white border-none d-block">
      <mat-card-header>
        <mat-card-title>
          <h5 class="mt-0 mb-0">
              Configuración de Horario de Visitas
          </h5>
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="row">
          <form [formGroup]="neighborhoodForm">
            <div class="col-lg-6 col-md-6 col-sm-6">
              <div class="mb-20">
                <label class="main-label d-block lh-1 text-black mb-10">Hora de Inicio</label>
                <mat-form-field appearance="fill">
                  <i-feather name="clock"></i-feather>
                  <mat-label>Hora de Inicio</mat-label>
                  <input matInput type="time" formControlName="startHour" [step]="60" placeholder="HH:MM AM/PM">
                </mat-form-field>
                <div class="error text-danger" *ngIf="neighborhoodForm.get('startHour')!.hasError('required') && neighborhoodForm.get('startHour')!.touched">
                  La hora de inicio es requerida.
                </div>
              </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6">
              <div class="mb-20">
                <label class="main-label d-block lh-1 text-black mb-10">Hora de Inicio</label>
                <mat-form-field appearance="fill">
                  <i-feather name="clock"></i-feather>
                  <mat-label>Hora Final</mat-label>
                  <input matInput type="time" formControlName="endHour" [step]="60" placeholder="HH:MM AM/PM">
                </mat-form-field>
                <div class="error text-danger" *ngIf="neighborhoodForm.get('endHour')!.hasError('required') && neighborhoodForm.get('endHour')!.touched">
                  La hora final es requerida.
                </div>
              </div>
            </div>
          </form>

        </div>            
      </mat-card-content>
    </mat-card>
  </div>
</div>  -->
